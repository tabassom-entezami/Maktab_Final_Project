{% extends 'base.html' %}
{% load static %}

{% block meta %}
<meta name="description" content="Home of our food site">
<meta name="keywords" content="home , Home , Food , food ">
{% endblock meta %}
{% block title %}Home{% endblock title %}
{% block css %}

 <!-- Favicons -->
 {% comment %} <link href="{% static 'assets/img/favicon.png' %}" rel="icon">
 <link href="{% static 'assets/img/apple-touch-icon.png' %}" rel="apple-touch-icon"> {% endcomment %}

 <!-- Google Fonts -->
 <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

 <link href="{% static 'assets/css/search.css' %}" rel="stylesheet">
 <!-- Vendor CSS Files -->
 <link href="{% static 'assets/vendor/animate.css/animate.min.css' %}" rel="stylesheet">
 <link href="{% static 'assets/vendor/aos/aos.css' %}" rel="stylesheet">
 <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
 <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
 <link href="{% static 'assets/vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
 <link href="{% static 'assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
 <link href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">
 <link href="{% static 'assets/css/search.css' %}" rel="stylesheet">
 <!-- Template Main CSS File -->
 <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">
 <link href="{% static 'assets/css/search2.css' %}" rel="stylesheet">

 <style>

.search-focus{
    background-color: rgb(255, 255, 255);
}
.not-visible {

    display: none;
    width: 50%;
    
}

.result-card {
    box-shadow: 0 8px 8px 0 rgba(0, 0, 0, 25);
    transition: 0.5s;
    border-radius: 7px;
    padding: 15px 15px;
    margin: 0 auto;
}

.item {
    text-decoration: none;
}

.food-img {
    width: 50px;
    height: 50px;
    border-radius: 50%;
}
 </style>
{% endblock css %}

{% block content %}
<div class="w-10 text-center">
	<form id="search-form" autocomplete='off' style="margin-top: 10px;">
		{% csrf_token %}
		<input type="text" id='search-input' class='p-1 w-50 search' placeholder="search">
	</form>	
<div id="result-box" class="result-card not-visible" style="width: 50%;max-height:none;"></div>


<section id="hero" class="d-flex align-items-center">
    <div class="container position-relative text-center text-lg-start"  >
      <div class="row">
        <div class="col-lg-8">
          <h1>Welcome to <span>my website</span></h1>
          <h2>Delivering great food </h2>

          <div class="btns">
            <a href="#menu" class="btn-menu animated fadeInUp scrollto">Our Menu</a>
            
          </div>
        </div>
       

      </div>
    </div>
  </section><!-- End Hero -->
  <main id="main">
    <!-- ======= About Section ======= -->
    <section id="about" class="about">
      <div class="container" >

        <div class="row">
          <div class="col-lg-6 order-1 order-lg-2"  >
            <div class="about-img">
              <img src="{% static 'assets/img/about.jpg' %}" alt="">
            </div>
          </div>
          <div class="col-lg-6 pt-4 pt-lg-0 order-2 order-lg-1 content">
            <h3>Voluptatem dignissimos provident quasi corporis voluptates sit assumenda.</h3>
            <p class="fst-italic">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
              magna aliqua.
            </p>
            <ul>
              <li><i class="bi bi-check-circle"></i> Ullamco laboris nisi ut aliquip ex ea commodo consequat.</li>
              <li><i class="bi bi-check-circle"></i> Duis aute irure dolor in reprehenderit in voluptate velit.</li>
              <li><i class="bi bi-check-circle"></i> Ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate trideta storacalaperda mastiro dolore eu fugiat nulla pariatur.</li>
            </ul>
            <p>
              Ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
              velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
              culpa qui officia deserunt mollit anim id est laborum
            </p>
          </div>
        </div>

      </div>
    </section><!-- End About Section -->

    <!-- ======= Why Us Section ======= -->
    <section id="why-us" class="why-us">
      <div class="container" >

        <div class="section-title">
          <h2>Why Us</h2>
          <p>Why Choose Our website</p>
        </div>

        <div class="row">

          <div class="col-lg-4">
            <div class="box"  >
              <span>01</span>
              <h4>Lorem Ipsum</h4>
              <p>Ulamco laboris nisi ut aliquip ex ea commodo consequat. Et consectetur ducimus vero placeat</p>
            </div>
          </div>

          <div class="col-lg-4 mt-4 mt-lg-0">
            <div class="box"  >
              <span>02</span>
              <h4>Repellat Nihil</h4>
              <p>Dolorem est fugiat occaecati voluptate velit esse. Dicta veritatis dolor quod et vel dire leno para dest</p>
            </div>
          </div>

          <div class="col-lg-4 mt-4 mt-lg-0">
            <div class="box"  >
              <span>03</span>
              <h4> Ad ad velit qui</h4>
              <p>Molestiae officiis omnis illo asperiores. Aut doloribus vitae sunt debitis quo vel nam quis</p>
            </div>
          </div>

        </div>

      </div>
    </section><!-- End Why Us Section -->

    <!-- ======= Menu Section ======= -->
    <section id="menu" class="menu section-bg">
      <div class="container" >

        <div class="section-title">
          <h2>Menu</h2>
          <p>Check Our Tasty Menu</p>
        </div>

        <div class="row menu-container"  >
            {% for product in products %}
            <div class="col-lg-6 menu-item filter-starters">
              <img src="{{ product.food_id.photo.url }}" class="menu-img" alt="">
              <div class="menu-content">
                <a href="{% url 'product' product.id %}">{{product.food_id.name}} <b>FROM</b>  {{product.branch_id.name}}
                </a><span>{{product.price}}</span>
              </div>
            </div>

            {% endfor %}
         
    </section><!-- End Menu Section -->

    <!-- ======= Specials Section ======= -->
    <section id="specials" class="specials">
      <div class="container" >

        <div class="section-title">
          <h2>Specials</h2>
          <p>Check Our branches</p>
        </div>

        <div class="row"  >
          <div class="col-lg-3">
            <ul class="nav nav-tabs flex-column">
              {% for branch in branches %}
              <li class="nav-item">
                <a class="nav-link active show" data-bs-toggle="tab" href="{% url 'branches' branch.id %}">{{branch.name}}</a>
              </li>
              {% endfor %}
             
            </ul>
          </div>
          <div class="col-lg-9 mt-4 mt-lg-0">
            <ul class="nav nav-tabs flex-column">
              {% for branch in branches %}
              <li class="nav-item">
                <a class="nav-link active show"  href="{% url 'branches' branch.id %}">{{branch.discreption}}</a>
              </li>
              {% endfor %}
             
            </ul>
          </div>
        </div>

      </div>
    </section><!-- End Specials Section -->



    <!-- ======= Testimonials Section ======= -->
    <section id="testimonials" class="testimonials section-bg">
      <div class="container" >

        <div class="section-title">
          <h2>Testimonials</h2>
          <p>What they're saying about us</p>
        </div>

        <div class="testimonials-slider swiper"  >
          <div class="swiper-wrapper">

            <div class="swiper-slide">
              <div class="testimonial-item">
                <p>
                  <i class="bx bxs-quote-alt-left quote-icon-left"></i>
                  Proin iaculis purus consequat sem cure digni ssim donec porttitora entum suscipit rhoncus. Accusantium quam, ultricies eget id, aliquam eget nibh et. Maecen aliquam, risus at semper.
                  <i class="bx bxs-quote-alt-right quote-icon-right"></i>
                </p>
                <img src="{% static 'assets/img/testimonials/testimonials-1.jpg' %}" class="testimonial-img" alt="">
                <h3>Saul Goodman</h3>
                <h4>Ceo &amp; Founder</h4>
              </div>
            </div><!-- End testimonial item -->

            <div class="swiper-slide">
              <div class="testimonial-item">
                <p>
                  <i class="bx bxs-quote-alt-left quote-icon-left"></i>
                  Export tempor illum tamen malis malis eram quae irure esse labore quem cillum quid cillum eram malis quorum velit fore eram velit sunt aliqua noster fugiat irure amet legam anim culpa.
                  <i class="bx bxs-quote-alt-right quote-icon-right"></i>
                </p>
                <img src="assets/img/testimonials/testimonials-2.jpg" class="testimonial-img" alt="">
                <h3>Sara Wilsson</h3>
                <h4>Designer</h4>
              </div>
            </div>
            <!-- End testimonial item -->

            <div class="swiper-slide">
              <div class="testimonial-item">
                <p>
                  <i class="bx bxs-quote-alt-left quote-icon-left"></i>
                  Enim nisi quem export duis labore cillum quae magna enim sint quorum nulla quem veniam duis minim tempor labore quem eram duis noster aute amet eram fore quis sint minim.
                  <i class="bx bxs-quote-alt-right quote-icon-right"></i>
                </p>
                <img src="assets/img/testimonials/testimonials-3.jpg" class="testimonial-img" alt="">
                <h3>Jena Karlis</h3>
                <h4>Store Owner</h4>
              </div>
            </div><!-- End testimonial item -->

            <div class="swiper-slide">
              <div class="testimonial-item">
                <p>
                  <i class="bx bxs-quote-alt-left quote-icon-left"></i>
                  Fugiat enim eram quae cillum dolore dolor amet nulla culpa multos export minim fugiat minim velit minim dolor enim duis veniam ipsum anim magna sunt elit fore quem dolore labore illum veniam.
                  <i class="bx bxs-quote-alt-right quote-icon-right"></i>
                </p>
                <img src="assets/img/testimonials/testimonials-4.jpg" class="testimonial-img" alt="">
                <h3>Matt Brandon</h3>
                <h4>Freelancer</h4>
              </div>
            </div><!-- End testimonial item -->

            <div class="swiper-slide">
              <div class="testimonial-item">
                <p>
                  <i class="bx bxs-quote-alt-left quote-icon-left"></i>
                  Quis quorum aliqua sint quem legam fore sunt eram irure aliqua veniam tempor noster veniam enim culpa labore duis sunt culpa nulla illum cillum fugiat legam esse veniam culpa fore nisi cillum quid.
                  <i class="bx bxs-quote-alt-right quote-icon-right"></i>
                </p>
                <img src="assets/img/testimonials/testimonials-5.jpg" class="testimonial-img" alt="">
                <h3>John Larson</h3>
                <h4>Entrepreneur</h4>
              </div>
            </div><!-- End testimonial item -->

          </div>
          <div class="swiper-pagination"></div>
        </div>

      </div>
    </section><!-- End Testimonials Section -->

    <!-- ======= Gallery Section ======= -->
    <section id="gallery" class="gallery">

      <div class="container" >
        <div class="section-title">
          <h2>Gallery</h2>
          <p>Some photos from most sells</p>
        </div>
      </div>

      <div class="container-fluid"  >

        <div class="row g-0 " style="padding-left: 200px;">
          {% for best in best_foods %}
         
          <div class="col-6 col-md-2">
            <div class="gallery-item">
               <a href="{% url 'store'  %}" class="gallery-lightbox" data-gall="gallery-item"> 
                <img src="{{ best.photo.url }}" alt="" class="img-fluid" style="height: 200px;width:200px; border: 4px solid gold;">
                <h4 >{{best.name}}</h4>
                <h5>{{best.created_at_jalali.date}} created</h5>
                <h1>{{best.branch_id.name}}</h1>
              </a>
            </div>
          </div>
        
          {% endfor %}
          

    

        </div>

      </div>
    </section><!-- End Gallery Section -->

    <section id="gallery" class="gallery">

      <div class="container" >
        <div class="section-title">
          <h2> resturants</h2>
          <p>Best Resturants</p>
        </div>
      </div>

      <div class="container-fluid"  >

        <div class="row g-0 " style="padding-left: 200px;">
          {% for branch in best_branchs %}
         
          <div class="col-6 col-md-2">
            <div class="gallery-item">
              <a href="{% url 'branches' branch.id %}" class="gallery-lightbox" data-gall="gallery-item"> 
                
                <h4 >{{branch.name}}</h4>
                <h5>{{branch.created_at_jalali.date}} created</h5> 
                <h6>{{branch.address}} address</h6>
                <h6>{{branch.discreption}} </h6>

               </a> 
            </div>
          </div>
        
          {% endfor %}
          

    

        </div>

      </div>
    </section>

    <!-- ======= Contact Section ======= -->
    <section id="contact" class="contact">
      <div class="container" >

        <div class="section-title">
          <h2>Contact</h2>
          <p>Contact Us</p>
        </div>
      </div>

      

      <div class="container" >

        <div class="row mt-5">

          <div class="col-lg-4">
            <div class="info">
              <div class="address">
                <i class="bi bi-geo-alt"></i>
                <h4>Location:</h4>
                <p>A108 Adam Street, New York, NY 535022</p>
              </div>

              <div class="open-hours">
                <i class="bi bi-clock"></i>
                <h4>Open Hours:</h4>
                <p>
                  Monday-Saturday:<br>
                  11:00 AM - 2300 PM
                </p>
              </div>

              <div class="email">
                <i class="bi bi-envelope"></i>
                <h4>Email:</h4>
                <p>info@example.com</p>
              </div>

              <div class="phone">
                <i class="bi bi-phone"></i>
                <h4>Call:</h4>
                <p>+1 5589 55488 55s</p>
              </div>

            </div>

          </div>

          <div class="col-lg-8 mt-5 mt-lg-0">

            <!-- <form action="forms/contact.php" method="post" role="form" class="php-email-form">
              <div class="row">
                <div class="col-md-6 form-group">
                  <input type="text" name="name" class="form-control" id="name" placeholder="Your Name" required>
                </div>
                <div class="col-md-6 form-group mt-3 mt-md-0">
                  <input type="email" class="form-control" name="email" id="email" placeholder="Your Email" required>
                </div>
              </div>
              <div class="form-group mt-3">
                <input type="text" class="form-control" name="subject" id="subject" placeholder="Subject" required>
              </div>
              <div class="form-group mt-3">
                <textarea class="form-control" name="message" rows="8" placeholder="Message" required></textarea>
              </div>
              <div class="my-3">
                <div class="loading">Loading</div>
                <div class="error-message"></div>
                <div class="sent-message">Your message has been sent. Thank you!</div>
              </div>
              <div class="text-center"><button type="submit">Send Message</button></div>
            </form> -->

          </div>

        </div>

      </div>
    </section><!-- End Contact Section -->

</main>

<!-- End #main -->

  



{% endblock content %}

{% block script %}


    <script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
    <script src="{% static 'assets/vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
    <script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
    <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>

    <!-- Template Main JS File -->
    <script src="{% static 'assets/js/main.js' %}"></script>
  
  <script > 
    var URL ="{% url 'search2' %}"

  </script>
    
<script>

window.onload = function (){

const url=  window.location.href
const searchForm = document.getElementById("search-form")
const searchInput = document.getElementById("search-input")
const resultBox = document.getElementById('result-box')

const csrf = document.getElementsByName('csrfmiddlewaretoken')[0].value

const sendSearchData = (data)=>{
    $.ajax ({
        type:'POST',
        url: URL,
        data :{
            'csrfmiddlewaretoken':csrf,
            'data': data,
        },
        success: function(res){
            
            const data = res.dataa
            if (Array.isArray(data)){
              console.log("_________________")
                resultBox.innerHTML = ''
                data.forEach(food=>{
                    resultBox.innerHTML += `
                    
                    <a href="${url}${food.pk}" class='item' >
                        <div class ="row" style="margin-left:10px">
                            <div class ="col-2>
                                <p class="text-muted" ><img src="${food.food.img}" class="food-img"> <b style="color:black">
                                  ${food.food.food_name}</b><b style="color:#17a2b8"> ${food.menu.name}</b> <b style="color:#6610f2">
                                    ${food.price} </b></p>
                            </div>
                        </div>
                    </a>
                    `
                })


            }else{
                if (searchInput.value.length > 0){
                    resultBox.innerHTML=`<b>${data}</b>`
                }else{
                    resultBox.classList.add('not-visible')
                }
            }
       
        },
        error: function(error){
            console.log(error)
        }
    })
}


// load whatever is added in search input as value (letter by letter)
searchInput.addEventListener('keyup', e=>{
    console.log(e.target.value)
    if (resultBox.classList.contains('not-visible')){
        resultBox.classList.remove('not-visible')
    }
    sendSearchData(e.target.value)
})
 
  
} 

</script>

{% endblock script %}